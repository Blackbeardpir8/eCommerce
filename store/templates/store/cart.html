{% extends 'base.html' %}
{% block title %}Cart{% endblock %}
{% block content %}
<h2>Your Shopping Cart</h2>
<table>
  <tr>
    <th>Product</th>
    <th>Price</th>
    <th>Qty</th>
    <th>Subtotal</th>
    <th>Action</th>
  </tr>
  {% for item in items %}
  <tr>
    <td>
      {% if item.product.images.first %}
        <img src="{{ item.product.images.first.image.url }}" width="80" height="80" alt="{{ item.product.name }}"><br>
      {% else %}
        <span>No image</span><br>
      {% endif %}
      {{ item.product.name }}
    </td>
    <td>₹{{ item.product.price }}</td>
    <td>
      <form method="post" action="{% url 'update_cart_item' item.id %}">
        {% csrf_token %}
        <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
        <button type="submit">Update</button>
      </form>
    </td>
    <td>₹{{ item.subtotal }}</td>
    <td><a href="{% url 'remove_from_cart' item.id %}">Remove</a></td>
  </tr>
  {% endfor %}
</table>
<p><strong>Total:</strong> ₹{{ total }}</p>
{% endblock %}
